function updateBadge(e,t){var n=null;if(e==1){n=jQuery("#prof_joins_count")}else if(e==2){n=jQuery("#prof_reshares_count")}else if(e==3){n=jQuery("#prof_likes_count")}else if(e==4){n=jQuery("#prof_following_count")}if(n){try{var r=jQuery(n).text();r=parseInt(r)+parseInt(t);jQuery(n).text(r)}catch(i){console.log(i)}}}function shareThisFacebook(){var e=location.href;var t=document.title;window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(e)+"&t="+encodeURIComponent(t),"sharerfb","toolbar=0,status=0,width=626,height=436");return false}function shareThisTwitter(e){var t=location.href;window.open("http://twitter.com/share?url="+encodeURIComponent(t)+"&text="+e+" by @mytimety&count=horiztonal","sharertw","toolbar=0,status=0,width=626,height=436");return false}function shareThisGoogle(){var e=location.href;window.open("https://plus.google.com/share?url="+encodeURIComponent(e),"sharergg","toolbar=0,status=0,width=626,height=436");return false}function setButtonStatus(e,t){if(t){jQuery(e).removeClass(jQuery(e).attr("class_pass"));jQuery(e).addClass(jQuery(e).attr("class_aktif"));jQuery(e).attr("pressed","true")}else{jQuery(e).removeClass(jQuery(e).attr("class_aktif"));jQuery(e).addClass(jQuery(e).attr("class_pass"));jQuery(e).attr("pressed","false")}}function changeLocalData(e,t,n){var r=getDataFromLocalStorage(e);if(r!=null){if(t==0){r.userRelation.joinType=n}else if(t==1){r.userRelation.like=n}else if(t==2){r.userRelation.reshare=n}localStorage.setItem("event_"+e,JSON.stringify(r))}}function reshareEvent(e,t,n){jQuery.sessionphp.get("id",function(r){var i=r;jQuery(e).attr("disabled","disabled");if(t&&i){if(jQuery(e).attr("pressed")=="true"){setButtonStatus(e,false);setButtonStatus(n,false);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_RESHARE_EVENT,data:{eventId:t,userId:i,revert:1},success:function(r){if(typeof r=="string"){r=jQuery.parseJSON(r)}else{r=r}jQuery(e).removeAttr("disabled");if(r.error){getInfo(true,"Something went wrong :( Try again.","error",4e3);setButtonStatus(e,true);setButtonStatus(n,true)}else{updateBadge(2,-1);setTooltipButton(e,"Reshare");var i="reverted reshared Event";setButtonStatus(e,false);setButtonStatus(n,false);changeLocalData(t,2,false)}},error:function(t){console.log(t);setButtonStatus(e,true);setButtonStatus(n,true);jQuery(e).removeAttr("disabled")}},"json")}else{setButtonStatus(e,true);setButtonStatus(n,true);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_RESHARE_EVENT,data:{eventId:t,userId:i},success:function(r){if(typeof r=="string"){r=jQuery.parseJSON(r)}else{r=r}jQuery(e).removeAttr("disabled");if(r.error){getInfo(true,"Something went wrong :( Try again.","error",4e3);setButtonStatus(e,false);setButtonStatus(n,false)}else{updateBadge(2,1);setTooltipButton(e,"Revert");var i="You reshared Event";changeLocalData(t,2,true);setButtonStatus(e,true);setButtonStatus(n,true)}},error:function(t){console.log(t);setButtonStatus(e,false);setButtonStatus(n,false);jQuery(e).removeAttr("disabled")}},"json")}}else{jQuery(e).removeAttr("disabled")}});return false}function sendResponseEvent(e,t,n){var r=jQuery("#div_maybe_btn_modal_panel");var i=jQuery("#div_join_btn_modal_panel");jQuery.sessionphp.get("id",function(s){var o=s;jQuery(e).attr("disabled","disabled");if(t&&o){if(jQuery(e).attr("pressed")=="true"){n=5;setButtonStatus(jQuery("#div_img_event_"+t+" #div_maybe_btn"),false);setButtonStatus(jQuery("#div_img_event_"+t+" #div_join_btn"),false);setButtonStatus(i,false);setButtonStatus(r,false)}else{if(n==1){setButtonStatus(e,true);setButtonStatus(jQuery("#div_img_event_"+t+" #div_maybe_btn"),false);setButtonStatus(jQuery("#div_img_event_"+t+" #div_join_btn"),true);setButtonStatus(r,false)}else if(n==2){setButtonStatus(e,true);setButtonStatus(jQuery("#div_img_event_"+t+" #div_join_btn"),false);setButtonStatus(jQuery("#div_img_event_"+t+" #div_maybe_btn"),true);setButtonStatus(i,false)}else if(n==3){setButtonStatus(e,false)}}jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_JOINEVENT,data:{eventId:t,userId:o,type:n},success:function(s){if(typeof s=="string"){s=jQuery.parseJSON(s)}else{s=s}jQuery(e).removeAttr("disabled");if(s.error){getInfo(true,"Something went wrong :( Try again.","error",4e3)}else{var u="Whoa! Have fun!";if(n==0||n==5){updateBadge(1,-1);u="reject event";if(jQuery(e).attr("class_pass")=="join_btn"){setTooltipButton(e,"Join")}else{setTooltipButton(e,"Maybe")}setButtonStatus(jQuery("#div_img_event_"+t+" #div_maybe_btn"),false);setButtonStatus(jQuery("#div_img_event_"+t+" #div_join_btn"),false);setButtonStatus(i,false);setButtonStatus(r,false);removeFromMyTimety(t);changeLocalData(t,0,0)}else if(n==1){updateBadge(1,1);u="Whoa! Have fun!";setTooltipButton(e,"Decline");addToMyTimety(t,o);setButtonStatus(e,true);setButtonStatus(jQuery("#div_img_event_"+t+" #div_maybe_btn"),false);setButtonStatus(jQuery("#div_img_event_"+t+" #div_join_btn"),true);setButtonStatus(r,false);changeLocalData(t,0,1)}else if(n==2){updateBadge(1,1);u="Whoa! Have fun!";setTooltipButton(e,"Decline");addToMyTimety(t,o);setButtonStatus(e,true);setButtonStatus(jQuery("#div_img_event_"+t+" #div_join_btn"),false);setButtonStatus(jQuery("#div_img_event_"+t+" #div_maybe_btn"),true);setButtonStatus(i,false);changeLocalData(t,0,2)}else if(n==3){u="Event ignored";setButtonStatus(e,false);removeFromMyTimety(t)}}},error:function(t){console.log(t);jQuery(e).removeAttr("disabled")}},"json")}else{jQuery(e).removeAttr("disabled")}});return false}function likeEvent(e,t,n){jQuery.sessionphp.get("id",function(r){var i=r;jQuery(e).attr("disabled","disabled");if(t&&i){if(jQuery(e).attr("pressed")=="true"){setButtonStatus(e,false);setButtonStatus(n,false);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_LIKE_EVENT,data:{eventId:t,userId:i,revert:1},success:function(r){if(typeof r=="string"){r=jQuery.parseJSON(r)}else{r=r}jQuery(e).removeAttr("disabled");if(r.error){getInfo(true,"Something went wrong :( Try again.","error",4e3);setButtonStatus(e,true);setButtonStatus(n,true)}else{updateBadge(3,-1);setTooltipButton(e,"Like");var i="You unliked Event";setButtonStatus(e,false);setButtonStatus(n,false);changeLocalData(t,1,false)}},error:function(t){setButtonStatus(e,true);setButtonStatus(n,true);console.log(t);jQuery(e).removeAttr("disabled")}},"json")}else{setButtonStatus(e,true);setButtonStatus(n,true);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_LIKE_EVENT,data:{eventId:t,userId:i},success:function(r){if(typeof r=="string"){r=jQuery.parseJSON(r)}else{r=r}jQuery(e).removeAttr("disabled");if(r.error){getInfo(true,"Something went wrong :( Try again.","error",4e3);setButtonStatus(e,false);setButtonStatus(n,false)}else{updateBadge(3,1);var i="You liked Event";setTooltipButton(e,"Unlike");setButtonStatus(e,true);setButtonStatus(n,true);changeLocalData(t,1,true)}},error:function(t){setButtonStatus(e,false);setButtonStatus(n,false);console.log(t);jQuery(e).removeAttr("disabled")}},"json")}}else{jQuery(e).removeAttr("disabled")}});return false}
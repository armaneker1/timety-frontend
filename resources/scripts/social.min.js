function updateBadge(e,t,n){if(!n){n=false;try{var r=document.isuser;if(r){n=true}}catch(i){console.log(i)}}var s=null;if(e==1){if(!n){s=jQuery("#prof_joins_count")}}else if(e==2){if(!n){s=jQuery("#prof_reshares_count")}}else if(e==3){if(!n){s=jQuery("#prof_likes_count")}}else if(e==4){if(n){s=jQuery("#prof_followers_count")}else{s=jQuery("#prof_following_count")}}if(s){try{var o=jQuery(s).text();o=parseInt(o)+parseInt(t);jQuery(s).text(o)}catch(i){console.log(i)}}}function updateEventBadge(e,t,n){if(t){var r=null;if(e==1){r=jQuery(".iconHeart[eventid='"+t+"'] a")}else if(e==2){r=jQuery(".iconPeople[eventid='"+t+"'] a")}if(r){try{var i=jQuery(r).text();i=parseInt(i)+parseInt(n);jQuery(r).text(i)}catch(s){console.log(s)}}}}function shareThisFacebook(){var e=location.href;var t=document.title;window.open("http://www.facebook.com/sharer.php?count=horiztonal&u="+encodeURIComponent(e)+"&t="+encodeURIComponent(t),"sharerfb","toolbar=0,status=0,width=626,height=436");return false}function shareThisTwitter(e){var t=location.href;window.open("http://twitter.com/share?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(e+" by @mytimety"),"sharertw","toolbar=0,status=0,width=626,height=436");return false}function shareThisGoogle(){var e=location.href;window.open("https://plus.google.com/share?url="+encodeURIComponent(e),"sharergg","toolbar=0,status=0,width=626,height=436");return false}function setButtonStatus(e,t){if(t){if(e.length>0){jQuery.each(e,function(e,t){if(jQuery(t).attr("class_loader"))jQuery(t).removeClass(jQuery(t).attr("class_loader"));jQuery(t).removeClass(jQuery(t).attr("class_pass"));jQuery(t).addClass(jQuery(t).attr("class_aktif"));jQuery(t).attr("pressed","true")})}else{if(jQuery(e).attr("class_loader"))jQuery(e).removeClass(jQuery(e).attr("class_loader"));jQuery(e).removeClass(jQuery(e).attr("class_pass"));jQuery(e).addClass(jQuery(e).attr("class_aktif"));jQuery(e).attr("pressed","true")}}else{if(e.length>0){jQuery.each(e,function(e,t){if(jQuery(t).attr("class_loader"))jQuery(t).removeClass(jQuery(t).attr("class_loader"));jQuery(t).removeClass(jQuery(t).attr("class_aktif"));jQuery(t).addClass(jQuery(t).attr("class_pass"));jQuery(t).attr("pressed","false")})}else{if(jQuery(e).attr("class_loader"))jQuery(e).removeClass(jQuery(e).attr("class_loader"));jQuery(e).removeClass(jQuery(e).attr("class_aktif"));jQuery(e).addClass(jQuery(e).attr("class_pass"));jQuery(e).attr("pressed","false")}}}function setButtonStatusLoader(e){if(jQuery(e).attr("class_loader"))jQuery(e).addClass(jQuery(e).attr("class_loader"))}function changeLocalData(e,t,n){var r=getDataFromLocalStorage(e);if(r!=null){if(t==0){r.userRelation.joinType=n}else if(t==1){r.userRelation.like=n}else if(t==2){r.userRelation.reshare=n}localStorage.setItem("event_"+e,JSON.stringify(r))}}function reshareEvent(e,t){jQuery.sessionphp.get("id",function(n){var r=n;if(t&&r){var i=jQuery(e).data("disabled");if(!i){var s=jQuery(".wrapperlikeReshareEvent div[class_pass='reshareEvent'][eventid='"+t+"']");jQuery(s).data("disabled",true);if(jQuery(e).attr("pressed")=="true"){setButtonStatus(s,false);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_RESHARE_EVENT,data:{eventId:t,userId:r,revert:1},success:function(e){if(typeof e=="string"){e=jQuery.parseJSON(e)}else{e=e}if(e.error){getInfo(true,getLanguageText("LANG_SOCIAL_SOMETHING_WENT_WRONG"),"error",4e3);setButtonStatus(s,true)}else{updateBadge(2,-1);updateLocalEvent(r,t,"reshare",false);setTooltipButton(s,getLanguageText("LANG_SOCIAL_RESHARE"));setButtonStatus(s,false);changeLocalData(t,2,false)}jQuery(s).data("disabled",false)},error:function(e){console.log(e);setButtonStatus(s,true);jQuery(s).data("disabled",false)}},"json")}else{setButtonStatus(s,true);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_RESHARE_EVENT,data:{eventId:t,userId:r},success:function(e){if(typeof e=="string"){e=jQuery.parseJSON(e)}else{e=e}if(e.error){getInfo(true,getLanguageText("LANG_SOCIAL_SOMETHING_WENT_WRONG"),"error",4e3);setButtonStatus(s,false)}else{updateBadge(2,1);updateLocalEvent(r,t,"reshare",true);setTooltipButton(s,null);changeLocalData(t,2,true);setButtonStatus(s,true)}jQuery(s).data("disabled",false)},error:function(e){console.log(e);setButtonStatus(s,false);jQuery(s).data("disabled",false)}},"json")}}}else{window.location=TIMETY_PAGE_SIGNUP}});return false}function sendResponseEvent(e,t,n){jQuery.sessionphp.get("id",function(r){var i=r;if(t&&i){var s=jQuery("div[btntype='maybe'][eventid='"+t+"']");var o=jQuery("div[btntype='join'][eventid='"+t+"']");var u=jQuery(e).data("disabled");if(!u){jQuery(s).data("disabled",true);jQuery(o).data("disabled",true);var a=jQuery(s).attr("pressed");var f=jQuery(s).is(":visible");var l=jQuery(o).attr("pressed");var c=jQuery(o).is(":visible");if(jQuery(e).attr("pressed")=="true"){n=5;setButtonStatus(e,false)}else{if(n==1){jQuery(s).hide();jQuery(o).show()}else if(n==2){jQuery(s).show();jQuery(o).hide()}else if(n==3){}}setButtonStatusLoader(e);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_JOINEVENT,async:true,data:{eventId:t,userId:i,type:n},success:function(r){if(typeof r=="string"){r=jQuery.parseJSON(r)}else{r=r}if(r.error){getInfo(true,getLanguageText("LANG_SOCIAL_SOMETHING_WENT_WRONG"),"error",4e3);if(a!=null)setButtonStatus(s,!a);if(f)jQuery(s).show();else jQuery(s).hide();if(l!=null)setButtonStatus(o,!l);if(c)jQuery(o).show();else jQuery(o).hide()}else{if(n==0||n==5){updateBadge(1,-1);updateEventBadge(2,t,-1);updateLocalEvent(i,t,"joinType",0);setButtonStatus(s,false);jQuery(s).show();setButtonStatus(o,false);jQuery(o).show();changeLocalData(t,0,0)}else if(n==1){updateBadge(1,1);updateEventBadge(2,t,1);updateLocalEvent(i,t,"joinType",1);setButtonStatus(s,false);jQuery(s).hide();setButtonStatus(o,true);jQuery(o).show();changeLocalData(t,0,1)}else if(n==2){updateBadge(1,1);updateEventBadge(2,t,1);updateLocalEvent(i,t,"joinType",2);setButtonStatus(s,true);jQuery(s).show();setButtonStatus(o,false);jQuery(o).hide();changeLocalData(t,0,2)}else if(n==3){setButtonStatus(e,false);removeFromMyTimety(t)}}jQuery(s).data("disabled",false);jQuery(o).data("disabled",false)},error:function(e){if(a!=null)setButtonStatus(s,!a);if(f)jQuery(s).show();else jQuery(s).hide();if(l!=null)setButtonStatus(o,!l);if(c)jQuery(o).show();else jQuery(o).hide();console.log(e);jQuery(s).data("disabled",false);jQuery(o).data("disabled",false)}},"json")}}else{window.location=TIMETY_PAGE_SIGNUP}});return false}function likeEvent(e,t){jQuery.sessionphp.get("id",function(n){var r=n;if(t&&r){var i=jQuery(".wrapperlikeReshareEvent div[class_pass='likeEvent'][eventid='"+t+"']");var s=jQuery(e).data("disabled");if(!s){jQuery(i).data("disabled",true);if(jQuery(e).attr("pressed")=="true"){setButtonStatus(i,false);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_LIKE_EVENT,data:{eventId:t,userId:r,revert:1},success:function(e){if(typeof e=="string"){e=jQuery.parseJSON(e)}else{e=e}if(e.error){getInfo(true,getLanguageText("LANG_SOCIAL_SOMETHING_WENT_WRONG"),"error",4e3);setButtonStatus(i,true)}else{updateBadge(3,-1);updateEventBadge(1,t,-1);updateLocalEvent(r,t,"like",false);setTooltipButton(i,getLanguageText("LANG_SOCIAL_LIKE"));setButtonStatus(i,false);changeLocalData(t,1,false)}jQuery(i).data("disabled",false)},error:function(e){setButtonStatus(i,true);console.log(e);jQuery(i).data("disabled",false)}},"json")}else{setButtonStatus(i,true);jQuery.ajax({type:"POST",url:TIMETY_PAGE_AJAX_LIKE_EVENT,data:{eventId:t,userId:r},success:function(e){if(typeof e=="string"){e=jQuery.parseJSON(e)}else{e=e}if(e.error){getInfo(true,getLanguageText("LANG_SOCIAL_SOMETHING_WENT_WRONG"),"error",4e3);setButtonStatus(i,false)}else{updateBadge(3,1);updateEventBadge(1,t,1);updateLocalEvent(r,t,"like",true);setTooltipButton(i,null);setButtonStatus(i,true);changeLocalData(t,1,true)}jQuery(i).data("disabled",false)},error:function(e){setButtonStatus(i,false);console.log(e);jQuery(i).data("disabled",false)}},"json")}}}else{window.location=TIMETY_PAGE_SIGNUP}});return false}
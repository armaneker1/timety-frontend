function initTimeline(){var e=jQuery("#timeline");e.children().remove();var t=moment();var n=t.format("YYYY.MM.DD");var r=moment().format("YYYY.MM.DD");var i=t.clone().endOf("year").format("YYYY.MM.DD");var s=true;while(n!=i){var o=t.clone().endOf("month").format("YYYY.MM.DD");var u=t.format("MMMM");var a=createlielement(e,u,"timeline_month",null,false,null);a.click(toggleMonth);if(s){a.addClass("timeline_fisrt");a.addClass("timeline_current_month");s=false}var f=1;var l=getLanguageText("LANG_TIMELINE_THIS_WEEK");while(n!=o){if(t.day()==1||f==1){l=getWeekText(t);var c=createlielement(e,l,"timeline_week",u,true,null);if(l==getLanguageText("LANG_TIMELINE_THIS_WEEK")){c.addClass("timeline_current_week")}c.click(toggleWeek);f++}var h=t.format("DD ddd");var p=createlielement(e,h,"timeline_day",l,false,u);if(n==r){p.addClass("timeline_selected_day")}p.attr("date_formated",t.format("YYYY-MM-DD"));p.click(selectTimelineDate);t.add("days",1);n=t.format("YYYY.MM.DD")}h=t.format("DD ddd");p=createlielement(e,h,"timeline_day",l,false,u);if(n==r){p.addClass("timeline_selected_day")}p.attr("date_formated",t.format("YYYY-MM-DD"));p.click(selectTimelineDate);t.add("days",1)}}function createlielement(e,t,n,r,i,s){var o=jQuery("<li><a style='cursor:pointer'>"+t+"</a></li>");o.addClass(clearClassName(n));if(r&&!i){o.addClass("week_day_"+clearClassName(s)+"_"+clearClassName(r));o.attr("day",clearClassName(t));o.attr("week",clearClassName(r));o.attr("month",clearClassName(s));o.attr("act","false");o.hide()}else if(r&&i){o.addClass("month_week_"+clearClassName(r));o.attr("week",clearClassName(t));o.attr("month",clearClassName(r));o.attr("show","false");o.hide()}else{o.attr("month",clearClassName(t));o.attr("show","false")}e.append(o);return o}function toggleMonth(){var e=jQuery(this).attr("show");var t=jQuery(this).attr("month");jQuery(".timeline_day").hide();jQuery(".timeline_week").hide();jQuery(".timeline_month").hide();jQuery(".timeline_month").attr("show","false");jQuery(".timeline_selected_month").removeClass("timeline_selected_month");if(e=="false"){jQuery(this).show();jQuery(this).attr("show","true");jQuery(this).addClass("timeline_selected_month");jQuery(".month_week_"+t).show();if(jQuery(this).hasClass("timeline_current_month")){jQuery(".timeline_current_week").click()}}else{jQuery(".timeline_month").show()}}function toggleWeek(){var e=jQuery(this).attr("show");var t=jQuery(this).attr("week");var n=jQuery(this).attr("month");jQuery(".timeline_day").hide();jQuery(".timeline_week").attr("show","false");if(e=="false"){jQuery(this).show();jQuery(this).attr("show","true");jQuery(".week_day_"+n+"_"+t).show()}}function selectTimelineDate(){jQuery(".timeline_selected_day").removeClass("timeline_selected_day");jQuery(this).addClass("timeline_selected_day");jQuery("#searchText").val("");page_wookmark=0;selectedDate=jQuery(this).attr("date_formated");selectedDate=null;wookmarkFiller(document.optionsWookmark,true,true)}function getWeekText(e){var t=moment().week();var n=e.week();if(n==t){return getLanguageText("LANG_TIMELINE_THIS_WEEK")}else{return getLanguageText("LANG_TIMELINE_N_WEEK",weekOfDate(e))}}function weekOfDate(e){var t=e.week()-e.clone().date(1).week()+1;if(t<0){t=t+52}return t}function clearClassName(e){e=e.replace(/\s/g,"");e=e.replace(/\./g,"");return e}jQuery(document).ready(function(){jQuery(".main_sag").jScroll({speed:"0",top:100,limit:145,tmax:220});initTimeline()})
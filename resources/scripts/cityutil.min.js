function setCitiesLocalStorage(){jQuery.ajax({type:"GET",url:TIMETY_PAGE_AJAX_GET_CITY_MAPS,data:{},success:function(e){var t=null;try{if(typeof e=="string"){t=jQuery.parseJSON(e)}else{t=e}}catch(n){console.log(n);console.log(e)}if(t&&t.length>0){localStorage.setItem("city_maps",t.toJSON())}}},"json");if(jQuery("#city_top").val()==jQuery("#city_top").attr("city_top")||jQuery("#city_top").val()==null||jQuery("#city_top").val()==""){getAllLocation(setCityTopLocation)}}function setCityTopLocation(e,t){if(t=="OK"&&e.length>0){var n="";var r=0;if(e[0]){if(e[0].address_components.length>0){for(var i=0;i<e[0].address_components.length;i++){var s=e[0].address_components[i];if(s&&s.types&&s.types.length>0){if(jQuery.inArray("city",s.types)>=0&&r<4){n=s.long_name;r=4}else if(jQuery.inArray("administrative_area_level_1",s.types)>=0&&r<3){n=s.long_name;r=3}else if(jQuery.inArray("administrative_area_level_2",s.types)>=0&&r<2){n=s.long_name;r=2}else if(jQuery.inArray("political",s.types)>=0&&jQuery.inArray("locality",s.types)>=0&&r<1){n=s.long_name;r=1}}}}}if(!n){n=e[0].formatted_address}selectCity(n)}else{console.log(e)}}function selectCity(e){jQuery("#city_top").val(e);var t=localStorage.getItem("city_maps");var n=false;if(t){try{t=jQuery.parseJSON(t);var r=e.replace(/\s+/g,"");r=r.toLowerCase();for(var i=0;i<t.length;i++){var s=t[i];if(s&&s.name&&s.id&&s.name==r){city_channel=s.id;n=true;break}}}catch(o){console.log(o)}}if(!n){jQuery.ajax({type:"GET",url:TIMETY_PAGE_AJAX_GET_CITY_ID,data:{cityName:e},success:function(e){var t=null;try{if(typeof e=="string"){t=jQuery.parseJSON(e)}else{t=e}}catch(n){console.log(n);console.log(e)}if(t&&t.success){if(t.param){city_channel=t.param;page_wookmark=0;wookmarkFiller(document.optionsWookmark,true,true)}}}},"json")}else{page_wookmark=0;wookmarkFiller(document.optionsWookmark,true,true)}}var autocompleteCityTop=null;jQuery(document).ready(function(){setCitiesLocalStorage();var e=document.getElementById("city_top");var t={types:["(cities)"]};autocompleteCityTop=new google.maps.places.Autocomplete(e,t);google.maps.event.addListener(autocompleteCityTop,"place_changed",function(){var e=autocompleteCityTop.getPlace();if(e){var t="";var n=e.geometry.location;if(n){getCityLocationByCoordinates(n.lat(),n.lng(),setCityTopLocation)}selectCity(t)}});if(jQuery("#city_top").val()==jQuery("#city_top").attr("city_top")||jQuery("#city_top").val()==null||jQuery("#city_top").val()==""){getAllLocation(setCityTopLocation)}})
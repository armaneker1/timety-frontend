function checkFollowerList(){if(!local_quick_follwer_list){try{local_quick_follwer_list=localStorage.getItem("local_quick_follwer_list");local_quick_follwer_list=JSON.parse(local_quick_follwer_list)}catch(e){console.log(e)}jQuery.sessionphp.get("id",function(e){e=6618346;if(e){jQuery.ajax({type:"GET",url:TIMETY_PAGE_AJAX_GETPEOPLEORGROUP+"",dataType:"json",contentType:"application/json",data:{u:e,term:"*",followers:1},error:function(e,t,n){console.log(n)},success:function(e){try{if(typeof e=="string"){e=jQuery.parseJSON(e)}else{e=e}}catch(t){console.log(t);console.log(e)}if(e&&e.length>0){local_quick_follwer_list=e;localStorage.setItem("local_quick_follwer_list",local_quick_follwer_list.toJSON())}}},"json")}})}}function setSelectedHint(e){if(e>=0&&jQuery("#quick_add_time_hint_model_ul li").length>e){selected_hint_element_index=e;jQuery(".quick_add_time_hint_model_ul_li_selected").removeClass("quick_add_time_hint_model_ul_li_selected");var t=jQuery("#quick_add_time_hint_model_ul li")[e];jQuery(t).addClass("quick_add_time_hint_model_ul_li_selected")}}function selectNextHint(){setSelectedHint(selected_hint_element_index+1)}function selectPrevHint(){setSelectedHint(selected_hint_element_index-1)}function selectElementHint(){var e=jQuery(this).attr("order");setSelectedHint(e)}function clickSelectedHint(){jQuery("#quick_add_time_hint_model_ul li")[selected_hint_element_index].click();jQuery("#quick_add_time_hint_model").hide()}function showDateQA(e,t){if(e){jQuery("#te_quick_event_date").val(e);jQuery("#te_event_start_date").val(e)}if(t){jQuery("#quick_event_date_text").text(t);jQuery("#quick_event_date_text").show()}else{jQuery("#quick_event_date_text").hide()}if(!jQuery("#te_quick_event_time").val()){jQuery("#te_quick_event_time").val(moment().add("hours",2).format("HH")+":00")}}function showTimeQA(e,t){if(e){jQuery("#te_quick_event_time").val(e);jQuery("#te_event_start_time").val(e)}if(t){jQuery("#quick_event_time_text").text(t);jQuery("#quick_event_time_text").show()}else{jQuery("#quick_event_time_text").hide()}}function completeWord(e){if(e){var t=jQuery("#te_quick_event_desc").val();t=t.trim();var n=t.trim().split(" ");var r=n[n.length-1];t=t.substr(0,t.length-r.length)+e;jQuery("#te_quick_event_desc").val(t+" ")}}function setDateById(){var e=jQuery(this).attr("_id");var t=null;var n="";var r=0;var i=moment().day();if(e=="1"||e==1){n="Today";t=moment().format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="2"||e==2){n="Tomorrow";t=moment().add("days",1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="3"||e==3){n="Day After Tomorrow";t=moment().add("days",2).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="4"||e==4){n="Next Month";t=moment().add("months",1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="5"||e==5){n="Next Week";t=moment().add("weeks",1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="6"||e==6){n="Next Week";t=moment().add("weeks",1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="7"||e==7){n="January";t=moment().month(0).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="8"||e==8){n="February";t=moment().month(1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="9"||e==9){n="March";t=moment().month(2).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="10"||e==10){n="April";t=moment().month(3).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="11"||e==11){n="May";t=moment().month(4).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="12"||e==12){n="June";t=moment().month(5).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="13"||e==13){n="July";t=moment().month(6).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="14"||e==14){n="August";t=moment().month(7).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="15"||e==15){n="September";t=moment().month(8).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="16"||e==15){n="October";t=moment().month(9).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="17"||e==17){n="November";t=moment().month(10).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="18"||e==18){n="December";t=moment().month(11).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="21"||e==21){n="Tuesday";r=2;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="22"||e==22){n="Wednesday";r=3;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="23"||e==23){n="Thursday";r=4;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="24"||e==24){n="Friday";r=5;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="30"||e==30){n="Monday";r=1;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="25"||e==25){n="Saturday";r=6;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="26"||e==26){n="Sunday";r=0;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="29"||e==29){n="Next Year";t=moment().add("years",1).format("DD.MM.YYYY");showDateQA(t,n)}jQuery("#quick_add_time_hint_model").hide()}function setCustomDate(){var e=quick_hint_object.substr(1);showDateQA(e,e);jQuery("#quick_add_time_hint_model").hide()}function setCustomTime(){var e=quick_hint_object.substr(1);showTimeQA(e,e);jQuery("#quick_add_time_hint_model").hide()}function addQPersonData(e){remQPersonData(e);var t=jQuery("#te_quick_event_desc").data("people_array");if(!t||t.length<1){t=new Array}t[t.length]=e+"";jQuery("#te_quick_event_desc").data("people_array",t)}function remQPersonData(e){var t=jQuery("#te_quick_event_desc").data("people_array");if(!t||t.length<1){t=new Array}var n=new Array;j=0;for(var r=0;r<t.length;r++){var i=t[r];if(i){if(i!=e+""){n[j]=i;j++}}}jQuery("#te_quick_event_desc").data("people_array",n)}function addPeople(){var e=quick_hint_object;var t=jQuery(this).data("data");try{if(typeof t=="string"){t=jQuery.parseJSON(t)}}catch(n){console.log(n)}if(t){var r=t.user_id;e=t.user_name;if(r){addQPersonData(r);var i=jQuery("#te_quick_event_desc").data("people_array");if(i&&i.length>1){e=e+"+"+(i.length-1)}jQuery("#quick_event_people_text").text(e);jQuery("#quick_event_people_text").show()}}jQuery("#quick_add_time_hint_model").hide()}function empty(){alert("empty")}function getTimeHint(e){if(e&&e.length>2){if(e.charAt(0)=="@"){e=e.substr(1)}var t=new Array;for(var n in date_var){n=n.toLowerCase();e=e.toLowerCase();if(n.indexOf(e)==0){t[t.length]=date_var[n]}}var r;try{var i=moment(e,"DD.MM.YYYY");var s=moment(e,"DD/MM/YYYY");var o=moment(e,"HH:mm");var u=moment(e,"HH.mm");var a="00";var f="";r='{"id":"31","text":"';var l='","func":"';var c='"}';var h=true;if(i.isValid()){r=r+"@"+i.format("DD.MM.YYYY")+l+"setCustomDate"+c}else if(s.isValid()){r=r+"@"+s.format("DD.MM.YYYY")+l+"setCustomDate"+c}else if(o.isValid()){f=o.format("mm");if(f<15){a="00"}else if(f<30){a="15"}else if(f<45){a="30"}else if(f<=59){a="45"}r=r+"@"+o.format("HH:")+a+l+"setCustomTime"+c}else if(u.isValid()){f=o.format("mm");if(f<15){a="00"}else if(f<30){a="15"}else if(f<45){a="30"}else if(f<=59){a="45"}r=r+"@"+u.format("HH:")+a+l+"setCustomTime"+c}else{h=false}if(h){t[t.length]=r}}catch(p){console.log(p)}try{r='{"id":"';var d='","text":"';var v='","func":"';var m='","user_id":"';var g='","user_name":"';var y='"}';var b;if(local_quick_follwer_list&&local_quick_follwer_list.length>0){for(var w=0;w<local_quick_follwer_list.length;w++){b=local_quick_follwer_list[w];if(b.label.indexOf(e)>=0){t[t.length]=r+"32"+b.id+d+b.label+v+"addPeople"+m+b.id+g+b.firstName+y}}}}catch(p){console.log(p)}if(t.length>0){return t}}return false}function checkQuickEventInput(e){var t=jQuery("#quick_add_time_hint_model");var n=jQuery("#quick_add_time_hint_model_ul");var r=jQuery("#te_quick_event_desc").val();var i=false;if(r!=jQuery("#te_quick_event_desc").attr("placeholder")){var s=r.trim().split(" ");n.children().remove();if(s&&s.length>0){var o=s[s.length-1];var u=getTimeHint(o);if(u){i=true;var a=new Array;var f=0;for(var l=0;l<u.length;l++){var c=u[l];try{if(typeof c=="string"){c=jQuery.parseJSON(c)}}catch(h){console.log(h)}if(!a[c.id]){a[c.id]=true;var p=createQuickAddHintLi(n,c.text,window[c.func],c.user_name);p.mouseover(selectElementHint);p.attr("order",f);f++;p.attr("_id",c.id);p.data("data",c)}}}}}if(i){setSelectedHint(0);t.css("left",r.trim().length*6);t.show()}else{t.hide()}}function createQuickAddHintLi(e,t,n,r){var i='<li style="cursor:pointer;width: 100%;" title="'+t+'"><button type="button" class="ekle icon_bg"></button><span>'+t+"</span></li><br/>";var s=jQuery(i);if(jQuery.isFunction(n)){s.click(function(){quick_hint_object=t;if(r)t=r;completeWord(t)});s.click(n)}e.append(s);return s}function createEvent(){var e=jQuery("#te_quick_event_desc").val();if(!e||jQuery("#te_quick_event_desc").attr("placeholder")==e){getInfo(true,"Description Field Empty","error",4e3);return}var t=jQuery("#te_quick_event_date").val();var n=jQuery("#te_quick_event_time").val();var r=jQuery("#te_quick_event_desc").data("people_array");var i="";for(var s=0;r&&s<r.length;s++){var o=r[s];if(o){if(i.length>0){i+=","}i+="u_"+o}}var u=jQuery("#te_quick_event_location").val();if(!u||jQuery("#te_quick_event_location").attr("placeholder")==u){u=""}var a=jQuery("#te_quick_event_loc_inpt").val();if(create_event_post==null){jQuery.sessionphp.get("id",function(r){var s=null;if(r)s=r;if(s){create_event_post=jQuery.ajax({type:"GET",url:TIMETY_PAGE_AJAX_CREATE_QUICK_EVENT,dataType:"json",contentType:"application/json",data:{event_description:e,event_start_date:t,event_start_time:n,event_peoples_list:i,event_loc:u,event_cor:a,userId:s},error:function(e,t,n){if(create_event_post){create_event_post.abort();create_event_post=null}getLoader(false);getInfo(true,"An erroroccured","error",4e3)},success:function(e){try{var t=null;try{if(typeof e=="string"){t=jQuery.parseJSON(e)}else{t=e}}catch(n){console.log(n);console.log(e)}if(!t||!t.success){console.log(t);getInfo(true,"An erroroccured","error",4e3);getLoader(false);return}else{getInfo(true,"Event created","info",4e3);getLoader(false);jQuery("#te_quick_add_event_bar").hide();return}}catch(r){getLoader(false);getInfo(true,r,"error",4e3);console.log(r);if(create_event_post){create_event_post.abort();create_event_post=null}getLoader(false)}finally{if(create_event_post){create_event_post.abort();create_event_post=null}getLoader(false)}}},"json")}})}}function getPrepopulatePeopleList(){var e=jQuery("#te_quick_event_desc").data("people_array");var t;var n;var r=new Object;var i=new Array;for(var s=0;e&&s<e.length;s++){t=e[s];for(var o=0;local_quick_follwer_list&&o<local_quick_follwer_list.length;o++){n=local_quick_follwer_list[o];if(n.id==t){r.id=n.id;r.label=n.label;i[i.length]=r;break}}}return i}function clearAllQuickAdd(){jQuery("#quick_event_people_text").text("");jQuery("#quick_event_people_text").hide();jQuery("#quick_event_time_text").text("");jQuery("#quick_event_time_text").hide();jQuery("#quick_event_date_text").text("");jQuery("#quick_event_date_text").hide();jQuery("#te_quick_event_desc").val("");jQuery("#te_quick_event_date").val("");jQuery("#te_quick_event_time").val("");jQuery("#te_quick_event_desc").data("people_array",null);jQuery("#te_quick_event_location").val("");jQuery("#te_quick_event_loc_inpt").val("");jQuery("#te_quick_add_event_bar").hide()}var quick_hint_object="";var local_quick_follwer_list=null;var selected_hint_element_index=null;jQuery(document).ready(function(){jQuery("#te_quick_event_desc").keyup(function(e){if(e.which==13){if(jQuery("#quick_add_time_hint_model").is(":visible")){clickSelectedHint()}else{createEvent()}}else if(e.which==38){selectPrevHint()}else if(e.which==40){selectNextHint()}else if(e.which==9){clickSelectedHint()}else{checkQuickEventInput(e)}});jQuery("#te_quick_event_desc").keydown(function(e){if(e.which==8||e.which==46)setTimeout(function(){checkQuickEventInput(e)},30)});shortcut.add("down",function(){jQuery("#quick_add_time_hint_model_ul").select();jQuery("#quick_add_time_hint_model_ul").focus();return false},{target:jQuery("#te_quick_event_desc")[0]});shortcut.add("tab",function(){jQuery("#quick_add_time_hint_model_ul").select();jQuery("#quick_add_time_hint_model_ul").focus();return false},{target:jQuery("#te_quick_event_desc")[0]})});var create_event_post=null;var date_var={today:'{"id":"1","text":"Today","func":"setDateById"}',tomorrow:'{"id":"2","text":"Tomorrow","func":"setDateById"}',after:'{"id":"3","text":"Day After Tomorrow","func":"setDateById"}',month:'{"id":"4","text":"Next Month","func":"setDateById"}',week:'{"id":"5","text":"Next Week","func":"setDateById"}',january:'{"id":"7","text":"January","func":"setDateById"}',february:'{"id":"8","text":"February","func":"setDateById"}',march:'{"id":"9","text":"March","func":"setDateById"}',april:'{"id":"10","text":"April","func":"setDateById"}',may:'{"id":"11","text":"May","func":"setDateById"}',june:'{"id":"12","text":"June","func":"setDateById"}',july:'{"id":"13","text":"July","func":"setDateById"}',august:'{"id":"14","text":"August","func":"setDateById"}',september:'{"id":"15","text":"September","func":"setDateById"}',october:'{"id":"16","text":"October","func":"setDateById"}',november:'{"id":"17","text":"November","func":"setDateById"}',december:'{"id":"18","text":"December","func":"setDateById"}',tuesday:'{"id":"21","text":"Tuesday","func":"setDateById"}',wednesday:'{"id":"22","text":"Wednesday","func":"setDateById"}',thursday:'{"id":"23","text":"Thursday","func":"setDateById"}',friday:'{"id":"24","text":"Friday","func":"setDateById"}',monday:'{"id":"30","text":"Monday","func":"setDateById"}',saturday:'{"id":"25","text":"Saturday","func":"setDateById"}',sunday:'{"id":"26","text":"Sunday","func":"setDateById"}',year:'{"id":"29","text":"Next Year","func":"setDateById"}'}
function showDateQA(e,t){if(e){jQuery("#te_quick_event_date").val(e);jQuery("#te_event_start_date").val(e)}if(t){jQuery("#quick_event_date_text").text(t);jQuery("#quick_event_date_text").show()}else{jQuery("#quick_event_date_text").hide()}}function showTimeQA(e,t){if(e){jQuery("#te_quick_event_time").val(e);jQuery("#te_event_start_time").val(e)}if(t){jQuery("#quick_event_time_text").text(t);jQuery("#quick_event_time_text").show()}else{jQuery("#quick_event_time_text").hide()}}function completeWord(e){if(e){var t=jQuery("#te_quick_event_desc").val();t=t.trim();var n=t.trim().split(" ");var r=n[n.length-1];t=t.substr(0,t.length-r.length)+e;jQuery("#te_quick_event_desc").val(t+" ")}}function setDateById(){var e=jQuery(this).attr("_id");var t=null;var n="";var r=0;var i=moment().day();if(e=="1"||e==1){n="Today";t=moment().format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="2"||e==2){n="Tomorrow";t=moment().add("days",1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="3"||e==3){n="Day After Tomorrow";t=moment().add("days",2).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="4"||e==4){n="Next Month";t=moment().add("months",1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="5"||e==5){n="Next Week";t=moment().add("weeks",1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="6"||e==6){n="Next Week";t=moment().add("weeks",1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="7"||e==7){n="January";t=moment().month(0).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="8"||e==8){n="February";t=moment().month(1).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="9"||e==9){n="March";t=moment().month(2).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="10"||e==10){n="April";t=moment().month(3).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="11"||e==11){n="May";t=moment().month(4).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="12"||e==12){n="June";t=moment().month(5).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="13"||e==13){n="July";t=moment().month(6).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="14"||e==14){n="August";t=moment().month(7).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="15"||e==15){n="September";t=moment().month(8).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="16"||e==15){n="October";t=moment().month(9).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="17"||e==17){n="November";t=moment().month(10).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="18"||e==18){n="December";t=moment().month(11).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="21"||e==21){n="Tuesday";r=2;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="22"||e==22){n="Wednesday";r=3;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="23"||e==23){n="Thursday";r=4;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="24"||e==24){n="Friday";r=5;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="30"||e==30){n="Monday";r=1;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="25"||e==25){n="Saturday";r=6;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="26"||e==26){n="Sunday";r=0;if(i>r){r+=7}t=moment().day(r).format("DD.MM.YYYY");showDateQA(t,n)}else if(e=="29"||e==29){n="Next Year";t=moment().add("years",1).format("DD.MM.YYYY");showDateQA(t,n)}jQuery("#quick_add_time_hint_model").hide()}function setCustomDate(){var e=date_string.substr(1);showDateQA(e,e);jQuery("#quick_add_time_hint_model").hide()}function setCustomTime(){var e=date_string.substr(1);showTimeQA(e,e);jQuery("#quick_add_time_hint_model").hide()}function empty(){alert("empty")}function getTimeHint(e){if(e&&e.length>2){if(e.charAt(0)=="@"){e=e.substr(1)}var t=new Array;for(var n in date_var){n=n.toLowerCase();e=e.toLowerCase();if(n.indexOf(e)==0){t[t.length]=date_var[n]}}if(t.length>0){return t}else{try{var r=moment(e,"DD.MM.YYYY");var i=moment(e,"DD/MM/YYYY");var s=moment(e,"HH:mm");var o=moment(e,"HH.mm");var u='{"id":"31","text":"';var a='","func":"';var f='"}';var l=true;if(r.isValid()){u=u+"@"+r.format("DD.MM.YYYY")+a+"setCustomDate"+f}else if(i.isValid()){u=u+"@"+i.format("DD.MM.YYYY")+a+"setCustomDate"+f}else if(s.isValid()){u=u+"@"+s.format("HH:mm")+a+"setCustomTime"+f}else if(o.isValid()){u=u+"@"+o.format("HH:mm")+a+"setCustomTime"+f}else{l=false}if(l){t[t.length]=u;return t}}catch(c){console.log(c)}}}return false}function checkQuickEventInput(e){var t=jQuery("#quick_add_time_hint_model");var n=jQuery("#quick_add_time_hint_model_ul");var r=jQuery("#te_quick_event_desc").val();var i=false;if(r!=jQuery("#te_quick_event_desc").attr("placeholder")){var s=r.trim().split(" ");n.children().remove();if(s&&s.length>0){var o=s[s.length-1];var u=getTimeHint(o);if(u){i=true;var a=new Array;for(var f=0;f<u.length;f++){var l=u[f];try{if(typeof l=="string"){l=jQuery.parseJSON(l)}}catch(c){console.log(c)}if(!a[l.id]){a[l.id]=true;var h=createQuickAddHintLi(n,l.text,window[l.func]);h.attr("_id",l.id)}}}}}if(i){t.css("left",r.trim().length*6);t.show()}else{t.hide()}}function createQuickAddHintLi(e,t,n){var r='<li style="cursor:pointer;width: 100%;" title="'+t+'"><button type="button" class="ekle icon_bg"></button><span>'+t+"</span></li>";var i=jQuery(r);if(jQuery.isFunction(n)){i.click(function(){date_string=t;completeWord(t)});i.click(n)}e.append(i);return i}function createEvent(){var e=jQuery("#te_quick_event_desc").val();if(!e||jQuery("#te_quick_event_desc").attr("placeholder")==e){getInfo(true,"Description Field Empty","error",4e3);return}var t=jQuery("#te_quick_event_date").val();var n=jQuery("#te_quick_event_time").val();var r=jQuery("#te_quick_event_people_btn").data("people_array");var i="";for(var s=0;r&&s<r.length;s++){var o=r[s];if(o){if(i.length>0){i+=","}i+="u_"+o}}var u=jQuery("#te_quick_event_location").val();if(!u||jQuery("#te_quick_event_location").attr("placeholder")==u){u=""}var a=jQuery("#te_quick_event_loc_inpt").val();if(create_event_post==null){jQuery.sessionphp.get("id",function(r){var s=null;if(r)s=r;if(s){create_event_post=jQuery.ajax({type:"GET",url:TIMETY_PAGE_AJAX_CREATE_QUICK_EVENT,dataType:"json",contentType:"application/json",data:{event_description:e,event_start_date:t,event_start_time:n,event_peoples_list:i,event_loc:u,event_cor:a,userId:s},error:function(e,t,n){if(create_event_post){create_event_post.abort();create_event_post=null}getLoader(false);getInfo(true,"An erroroccured","error",4e3)},success:function(e){try{var t=null;try{if(typeof e=="string"){t=jQuery.parseJSON(e)}else{t=e}}catch(n){console.log(n);console.log(e)}if(!t||!t.success){console.log(t);getInfo(true,"An erroroccured","error",4e3);getLoader(false);return}else{getInfo(true,"Event created","info",4e3);getLoader(false);jQuery("#te_quick_add_event_bar").hide();return}}catch(r){getLoader(false);getInfo(true,r,"error",4e3);console.log(r);if(create_event_post){create_event_post.abort();create_event_post=null}getLoader(false)}finally{if(create_event_post){create_event_post.abort();create_event_post=null}getLoader(false)}}},"json")}})}}var date_string="";jQuery(document).ready(function(){jQuery("#te_quick_event_desc").keyup(function(e){if(e.which==13){if(jQuery("#quick_add_time_hint_model").is(":visible")){jQuery("#quick_add_time_hint_model_ul").children()[0].click();jQuery("#quick_add_time_hint_model").hide()}else{createEvent()}}else{checkQuickEventInput(e)}});jQuery("#te_quick_event_desc").keydown(function(e){if(e.which==8||e.which==46)setTimeout(function(){checkQuickEventInput(e)},30)});shortcut.add("down",function(){jQuery("#quick_add_time_hint_model_ul").select();jQuery("#quick_add_time_hint_model_ul").focus();return false},{target:jQuery("#te_quick_event_desc")[0]});shortcut.add("tab",function(){jQuery("#quick_add_time_hint_model_ul").select();jQuery("#quick_add_time_hint_model_ul").focus();return false},{target:jQuery("#te_quick_event_desc")[0]})});var create_event_post=null;var date_var={today:'{"id":"1","text":"Today","func":"setDateById"}',tomorrow:'{"id":"2","text":"Tomorrow","func":"setDateById"}',after:'{"id":"3","text":"Day After Tomorrow","func":"setDateById"}',month:'{"id":"4","text":"Next Month","func":"setDateById"}',week:'{"id":"5","text":"Next Week","func":"setDateById"}',january:'{"id":"7","text":"January","func":"setDateById"}',february:'{"id":"8","text":"February","func":"setDateById"}',march:'{"id":"9","text":"March","func":"setDateById"}',april:'{"id":"10","text":"April","func":"setDateById"}',may:'{"id":"11","text":"May","func":"setDateById"}',june:'{"id":"12","text":"June","func":"setDateById"}',july:'{"id":"13","text":"July","func":"setDateById"}',august:'{"id":"14","text":"August","func":"setDateById"}',september:'{"id":"15","text":"September","func":"setDateById"}',october:'{"id":"16","text":"October","func":"setDateById"}',november:'{"id":"17","text":"November","func":"setDateById"}',december:'{"id":"18","text":"December","func":"setDateById"}',tuesday:'{"id":"21","text":"Tuesday","func":"setDateById"}',wednesday:'{"id":"22","text":"Wednesday","func":"setDateById"}',thursday:'{"id":"23","text":"Thursday","func":"setDateById"}',friday:'{"id":"24","text":"Friday","func":"setDateById"}',monday:'{"id":"30","text":"Monday","func":"setDateById"}',saturday:'{"id":"25","text":"Saturday","func":"setDateById"}',sunday:'{"id":"26","text":"Sunday","func":"setDateById"}',year:'{"id":"29","text":"Next Year","func":"setDateById"}'}
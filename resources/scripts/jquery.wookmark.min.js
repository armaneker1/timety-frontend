$.fn.wookmark=function(e){if(!this.wookmarkOptions){this.wookmarkOptions=jQuery.extend({container:jQuery("body"),offset:2,autoResize:false,itemWidth:jQuery(this[0]).outerWidth(),resizeDelay:50},e)}else if(e){this.wookmarkOptions=jQuery.extend(this.wookmarkOptions,e)}if(!this.wookmarkColumns){this.wookmarkColumns=null;this.wookmarkContainerWidth=null}this.wookmarkLayout=function(){var e=this.wookmarkOptions.itemWidth+this.wookmarkOptions.offset;var t=jQuery(this.wookmarkOptions.container).width();var n=Math.floor((t+this.wookmarkOptions.offset)/e);var r=0;var i=0;if(this.wookmarkColumns!=null&&this.wookmarkColumns.length==n){i=this.wookmarkLayoutColumns(e,r)}else{i=this.wookmarkLayoutFull(e,n,r)}jQuery(this.wookmarkOptions.container).css("height",i+"px")};this.wookmarkLayoutFull=function(e,t,n){var r=[];while(r.length<t){r.push(0)}this.wookmarkColumns=[];while(this.wookmarkColumns.length<t){this.wookmarkColumns.push([])}var i,s,o,u=0,a=0,f=this.length,l=null,c=null,h=0;for(;u<f;u++){i=jQuery(this[u]);l=null;c=0;for(a=0;a<t;a++){if(l==null||r[a]<l){l=r[a];c=a}}i.css({position:"absolute",top:l+"px",left:c*e+n+"px"});r[c]=l+i.outerHeight()+this.wookmarkOptions.offset;h=Math.max(h,r[c]);if(this.wookmarkColumns[c]){this.wookmarkColumns[c].push(i)}else{this.wookmarkColumns.push(i)}}return h};this.wookmarkLayoutColumns=function(e,t){var n=[];while(n.length<this.wookmarkColumns.length){n.push(0)}var r=0,i=this.wookmarkColumns.length,s;var o=0,u,a;var f=0;for(;r<i;r++){s=this.wookmarkColumns[r];u=s.length;for(o=0;o<u;o++){a=s[o];a.css({left:r*e+t+"px",top:n[r]+"px"});n[r]+=a.outerHeight()+this.wookmarkOptions.offset;f=Math.max(f,n[r])}}return f};this.wookmarkResizeTimer=null;if(!this.wookmarkResizeMethod){this.wookmarkResizeMethod=null}if(this.wookmarkOptions.autoResize){this.wookmarkOnResize=function(e){if(this.wookmarkResizeTimer){clearTimeout(this.wookmarkResizeTimer)}this.wookmarkResizeTimer=setTimeout(jQuery.proxy(this.wookmarkLayout,this),this.wookmarkOptions.resizeDelay)};if(!this.wookmarkResizeMethod){this.wookmarkResizeMethod=jQuery.proxy(this.wookmarkOnResize,this)}jQuery(window).resize(this.wookmarkResizeMethod)}this.wookmarkClear=function(){if(this.wookmarkResizeTimer){clearTimeout(this.wookmarkResizeTimer);this.wookmarkResizeTimer=null}if(this.wookmarkResizeMethod){jQuery(window).unbind("resize",this.wookmarkResizeMethod)}};this.wookmarkLayout();this.show()}
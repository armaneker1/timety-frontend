(function(e){function r(e,t,n,r,s){t.items.filter("li:eq("+r+")").addClass("active").siblings(".active").removeClass("active");if(typeof s=="undefined"){s="fast"}if(s){t.animate({scrollLeft:n},s,function(){i(t)})}else{var o=0;t.scrollLeft(n);i(t)}}function i(e){var t=e.items.filter(".active");if(t.hasClass("-before")){var n=t.prevAll().size();t.removeClass("active");t=e.items.filter(":not(.-before):eq("+n+")").addClass("active");e.scrollLeft(e.scrollLeft()+t.position().left)}else if(t.hasClass("-after")){var n=t.prevAll(".-after").size();t.removeClass("active");t=e.items.filter(":not(.-before):eq("+n+")").addClass("active");e.scrollLeft(e.scrollLeft()+t.position().left)}}function s(t){e("#debug span").text(t)}var t={};var n={init:function(t){var t=e.extend({},e.fn.lemmonSlider.defaults,t);return this.each(function(){var n=e(this),i=n.data("slider");if(!i){var s=n.find(t.slider),o=jQuery(t.options_container),u=s.find(t.items),a=1;u.each(function(){a+=e(this).outerWidth(true)});s.width(a);if(t.slideToLast)s.css("padding-right",n.width());if(t.infinite){a=a*3;s.width(a);u.clone().addClass("-after").insertAfter(u.filter(":last"));u.filter(":first").before(u.clone().addClass("-before"));u=s.find(t.items)}n.items=u;n.options=t;var f=n.scrollLeft();var l=n.width();var c=0;var h=0;u.each(function(t){if(e(this).position().left<l){c=e(this).position().left;h=t}});if(c>0&&f+l<a){jQuery(t.options_container).show()}else{jQuery(t.options_container).hide()}n.bind("nextSlide",function(i,o){var a=n.scrollLeft();var f=0;var l=0;u.each(function(t){if(f==0&&e(this).position().left>1){f=e(this).position().left;l=t}});if(f>0&&s.outerWidth()-a-n.width()>0){r(i,n,a+f,l,"fast")}else if(t.loop){r(i,n,0,0,"slow")}});n.bind("prevSlide",function(i,o){var a=n.scrollLeft();var f=0;var l=0;u.each(function(t){if(e(this).position().left<0){f=e(this).position().left;l=t}});if(f){r(i,n,a+f,l,"fast")}else if(t.loop){var c=s.outerWidth()-n.width();var h=u.filter(":last").position().left;l=u.size()-1;if(c>h){r(i,n,h,l,"fast")}else{r(i,n,c,l,"fast")}}});n.bind("nextPage",function(i,s){var o=n.scrollLeft();var f=n.width();var l=0;var c=0;u.each(function(t){if(e(this).position().left<f){l=e(this).position().left;c=t}});if(l>0&&o+f<a){r(i,n,o+l,c,"slow")}else if(t.loop){r(i,n,0,0,"slow")}});n.bind("prevPage",function(i,o){var a=n.scrollLeft();var f=n.width();var l=0;u.each(function(t){if(e(this).position().left<1-f){l=e(this).next().position().left;h=t}});if(a){if(l==0){r(i,n,0,0,"slow")}else{r(i,n,a+l,h,"slow")}}else if(t.loop){var c=s.outerWidth()-n.width();var p=u.filter(":last").position().left;if(c>p){n.animate({scrollLeft:p},"slow")}else{n.animate({scrollLeft:c},"slow")}}});n.bind("slideTo",function(e,t,i){r(e,n,n.scrollLeft()+u.filter(":eq("+t+")").position().left,t,i)});o.find(".next-slide").click(function(){n.trigger("nextSlide");return false});o.find(".prev-slide").click(function(){n.trigger("prevSlide");return false});o.find(".next-page").click(function(){n.trigger("nextPage");return false});o.find(".prev-page").click(function(){n.trigger("prevPage");return false});n.data("slider",{target:n,options:t})}})},destroy:function(){return this.each(function(){var t=e(this),n=t.next().filter(".controls"),r=t.data("slider");t.unbind("nextSlide");t.unbind("prevSlide");t.unbind("nextPage");t.unbind("prevPage");t.unbind("slideTo");n.find(".next-slide").unbind("click");n.find(".prev-slide").unbind("click");n.find(".next-page").unbind("click");n.find(".next-page").unbind("click");t.removeData("slider")})}};e.fn.lemmonSlider=function(t){if(n[t]){return n[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return n.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.lemmonSlider")}};e.fn.lemmonSlider.defaults={items:"> *",loop:true,slideToLast:false,slider:"> *:first",infinite:false,options_container:".controls"}})(jQuery)